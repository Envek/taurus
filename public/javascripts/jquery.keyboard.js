/*
jQuery UI Virtual Keyboard
Version 1.8.11 minified

Author: Jeremy Satterfield
Modified: Rob Garrison (Mottie on github)
-----------------------------------------
Creative Commons Attribution-Share Alike 3.0 Unported License
http://creativecommons.org/licenses/by-sa/3.0/

Caret code from jquery.caret.1.02.js
Licensed under the MIT License:
http://www.opensource.org/licenses/mit-license.php
-----------------------------------------
*/

(function(g){g.keyboard=function(d,k){var a=this,c;a.$el=g(d);a.el=d;a.$el.data("keyboard",a);a.init=function(){a.options=c=g.extend(!0,{},g.keyboard.defaultOptions,k);a.shiftActive=a.altActive=a.metaActive=a.sets=a.capsLock=!1;a.lastKeyset=[!1,!1,!1];a.rows=["","-shift","-alt","-alt-shift"];a.acceptedKeys=[];a.mappedKeys={};a.msie=g.browser.msie;a.opera=g.browser.opera;a.inPlaceholder=a.$el.attr("placeholder")||"";a.watermark=typeof document.createElement("input").placeholder!=="undefined"&&a.inPlaceholder!== "";a.regex=g.keyboard.comboRegex;a.decimal=/^\./.test(c.display.dec)?!0:!1;a.checkCaret=c.lockInput||a.msie||a.opera?!0:!1;g.each("initialized visible change hidden canceled accepted beforeClose".split(" "),function(b,h){g.isFunction(c[h])&&a.$el.bind(h+".keyboard",c[h])});if(c.alwaysOpen)c.stayOpen=!0;c.stayOpen||g(document).bind("mousedown.keyboard keyup.keyboard",function(b){a.isVisible&&(b.type==="mousedown"||b.type==="keyup"&&b.which===27)&&a.escClose(b)});a.$el.addClass("ui-keyboard-input ui-widget-content ui-corner-all").attr({"aria-haspopup":"true", role:"textbox"});(a.$el.is(":disabled")||a.$el.attr("readonly"))&&a.$el.addClass("ui-keyboard-nokeyboard");c.openOn&&a.$el.bind(c.openOn+".keyboard",function(){a.focusOn()});!a.watermark&&a.$el.val()===""&&a.inPlaceholder!==""&&a.$el.attr("placeholder")!==""&&a.$el.addClass("ui-keyboard-placeholder").val(a.inPlaceholder);a.$el.trigger("initialized.keyboard",[a,a.el]);c.alwaysOpen&&a.reveal()};a.focusOn=function(){if(!a.isVisible||c.alwaysOpen)clearTimeout(a.timer),a.reveal(),c.usePreview||setTimeout(function(){a.preview.focus()}, 100)};a.reveal=function(){g(".ui-keyboard:not(.ui-keyboard-always-open)").hide();g(".ui-keyboard-has-focus").removeClass("ui-keyboard-has-focus");if(a.$el.is(":disabled")||a.$el.attr("readonly"))a.$el.addClass("ui-keyboard-nokeyboard");else{a.$el.removeClass("ui-keyboard-nokeyboard");c.usePreview||a.$el.unbind(c.openOn?c.openOn+".keyboard":"");typeof a.$keyboard==="undefined"&&a.startup();!a.watermark&&a.el.value===a.inPlaceholder&&a.$el.removeClass("ui-keyboard-placeholder").val("");a.originalContent= a.$el.val();a.$preview.val(a.originalContent);var b;b=c.position;b.of=b.of||a.$el.data("keyboardPosition")||a.$el;b.collision=c.usePreview?b.collision||"fit fit":"flip flip";a.$keyboard.css({position:"absolute",left:0,top:0}).addClass("ui-keyboard-has-focus").show().position(b);if(typeof a.width==="undefined")a.width=Math.ceil(a.$keyboard.width());c.usePreview&&a.$preview.width(a.width);a.preview.focus();a.isVisible=!0;a.checkDecimal();a.lineHeight=parseInt(a.$preview.css("lineHeight"),10)||parseInt(a.$preview.css("font-size"), 10)+4;if(a.msie||a.opera){b=a.originalContent.length;b={start:b,end:b};if(!a.lastCaret)a.lastCaret=b;if(a.lastCaret.end===0&&a.lastCaret.start>0)a.lastCaret.end=a.lastCaret.start;if(a.lastCaret.start<0)a.lastCaret=b;a.$preview.caret(a.lastCaret.start,a.lastCaret.end);g('<div class="ui-keyboard-overlay"></div>').click(function(){g(this).remove();a.close();return!1}).appendTo("body");c.usePreview||a.$el.addClass("ui-keyboard-overlay-input")}a.$el.trigger("visible.keyboard",[a,a.el]);return a}};a.startup= function(){a.$keyboard=a.buildKeyboard();a.$allKeys=a.$keyboard.find(".ui-keyboard-button");a.$preview=c.usePreview?a.$keyboard.find(".ui-keyboard-preview"):a.$el;a.preview=a.$preview[0];a.$decBtn=a.$keyboard.find(".ui-keyboard-dec");a.wheel=g.isFunction(g.fn.mousewheel);a.alwaysAllowed=[20,33,34,35,36,37,38,39,40,45,46];a.lastCaret={start:0,end:0};a.$preview.bind("keypress.keyboard",function(b){var h=String.fromCharCode(b.charCode||b.which);if(a.checkCaret)a.lastCaret=a.$preview.caret();a.capsLock= h>=65&&h<=90&&!b.shiftKey||h>=97&&h<=122&&b.shiftKey?!0:!1;if(c.restrictInput){if((b.which===8||b.which===0)&&g.inArray(b.keyCode,a.alwaysAllowed))return;g.inArray(h,a.acceptedKeys)===-1&&b.preventDefault()}else if((b.ctrlKey||b.metaKey)&&(b.which===97||b.which===99||b.which===118||b.which===120))return;a.hasMappedKeys&&a.mappedKeys.hasOwnProperty(h)&&(a.insertText(a.mappedKeys[h]),b.preventDefault());a.checkMaxLength()}).bind("keyup.keyboard",function(b){switch(b.which){case 9:if(a.tab&&!c.lockInput)g.keyboard.keyaction.tab(a), a.tab=!1;break;case 27:return a.close(),!1}clearTimeout(a.throttled);a.throttled=setTimeout(function(){a.checkCombos()},100);a.checkMaxLength();a.$el.trigger("change.keyboard",[a,a.el])}).bind("keydown.keyboard",function(b){switch(b.which){case 9:a.tab=!0;b.preventDefault();break;case 13:if(b.shiftKey)return a.close(!0),!1;break;case 20:a.shiftActive=a.capsLock=!a.capsLock;a.showKeySet(this);break;case 86:if(b.ctrlKey||b.metaKey){if(c.preventPaste){b.preventDefault();break}a.checkCombos()}}}).bind("mouseup.keyboard", function(){if(a.checkCaret)a.lastCaret=a.$preview.caret()}).bind("blur.keyboard",function(){if(c.alwaysOpen)clearTimeout(a.timer),a.timer=setTimeout(function(){g(":focus")[0]!==a.el&&a.close(c.autoAccept)},300)});c.preventPaste&&(a.$preview.bind("contextmenu.keyboard",function(a){a.preventDefault()}),a.$el.bind("contextmenu.keyboard",function(a){a.preventDefault()}));a.$keyboard.appendTo("body");a.$allKeys.bind(c.keyBinding+".keyboard",function(b){var h;h=g.data(this,"key");var e=h.action.split(":")[0]; a.preview.focus();a.checkCaret&&a.$preview.caret(a.lastCaret.start,a.lastCaret.end);e.match("meta")&&(e="meta");if(g.keyboard.keyaction.hasOwnProperty(e)&&g(this).is(".ui-keyboard-actionkey")){if(g.keyboard.keyaction[e](a,this)===!1)return}else if(typeof h.action!=="undefined"&&(h=a.wheel&&!g(this).is(".ui-keyboard-actionkey")?h.curTxt:h.action,a.insertText(h),!a.capsLock&&!c.stickyShift&&!b.shiftKey))a.shiftActive=!1,a.showKeySet(this);a.checkCombos();a.checkMaxLength();a.$el.trigger("change.keyboard", [a,a.el]);c.usePreview&&a.preview.focus();b.preventDefault()}).bind("mouseenter.keyboard mouseleave.keyboard",function(b){var h=g(this),e=g.data(this,"key");b.type==="mouseenter"&&a.el.type!=="password"&&h.addClass("ui-state-hover").attr("title",function(b,f){return a.wheel&&f===""&&a.sets?c.wheelMessage:f});if(b.type==="mouseleave")e.curTxt=e.original,e.curNum=0,g.data(this,"key",e),h.removeClass(a.el.type==="password"?"":"ui-state-hover").attr("title",function(a,b){return b===c.wheelMessage?"": b}).find("span").text(e.original)}).bind("mousewheel.keyboard",function(b,h){if(a.wheel){var e,c=g(this),f=g.data(this,"key");e=f.layers||a.getLayers(c);f.curNum+=h>0?-1:1;if(f.curNum>e.length-1)f.curNum=0;if(f.curNum<0)f.curNum=e.length-1;f.layers=e;f.curTxt=e[f.curNum];g.data(this,"key",f);c.find("span").text(e[f.curNum]);return!1}}).bind("mouseup.keyboard",function(){a.preview.focus()})};a.insertText=function(b){var h,e,c=a.$preview.val(),f=a.$preview.caret(),g=a.$preview.scrollLeft();h=a.$preview.scrollTop(); e=c.length;if(f.end<f.start)f.end=f.start;if(f.start>e)f.end=f.start=e;if(a.preview.tagName==="TEXTAREA"){a.msie&&c.substr(f.start,1)==="\n"&&(f.start+=1,f.end+=1);if((a.msie||a.opera)&&c.substr(0,f.start).split("\n").length-1>0)e=c.substr(0,f.start).split("\n").length-1,f.start+=e,f.end+=e;e=c.split("\n").length-1;a.preview.scrollTop=e>0?a.lineHeight*e:h}h=b==="bksp"&&f.start===f.end?!0:!1;b=b==="bksp"?"":b;e=f.start+(h?-1:b.length);g+=parseInt(a.$preview.css("fontSize"),10)*(b==="bksp"?-1:1);a.$preview.val(c.substr(0, f.start-(h?1:0))+b+c.substr(f.end)).caret(e,e).scrollLeft(g);if(a.checkCaret)a.lastCaret={start:e,end:e}};a.checkMaxLength=function(){var b,h=a.$preview.val();if(c.maxLength!==!1&&h.length>c.maxLength)b=Math.min(a.$preview.caret().start,c.maxLength),a.$preview.val(h.substring(0,c.maxLength)),a.$preview.caret(b,b),a.lastCaret={start:b,end:b};a.$decBtn.length&&a.checkDecimal()};a.showKeySet=function(b){var h="",e=a.shiftActive?1:0;e+=a.altActive?2:0;if(!a.shiftActive)a.capsLock=!1;if(a.metaActive)h= b&&b.name&&b.name.match("meta")?b.name.replace(/(key_|_)/,""):"",h===""?h=a.metaActive===!0?"":a.metaActive:a.metaActive=h;h=e===0&&!a.metaActive?"-default":h===""?"":"-"+h;a.$keyboard.find(".ui-keyboard-keyset"+h+a.rows[e]).length?(a.$keyboard.find(".ui-keyboard-alt, .ui-keyboard-shift, .ui-keyboard-actionkey[class*=meta]").removeClass(c.actionClass).end().find(".ui-keyboard-alt")[a.altActive?"addClass":"removeClass"](c.actionClass).end().find(".ui-keyboard-shift")[a.shiftActive?"addClass":"removeClass"](c.actionClass).end().find(".ui-keyboard-lock")[a.capsLock? "addClass":"removeClass"](c.actionClass).end().find(".ui-keyboard-keyset").hide().end().find(".ui-keyboard-keyset"+h+a.rows[e]).show().end().find(".ui-keyboard-actionkey.ui-keyboard"+h).addClass(c.actionClass),a.lastKeyset=[a.shiftActive,a.altActive,a.metaActive]):(a.shiftActive=a.lastKeyset[0],a.altActive=a.lastKeyset[1],a.metaActive=a.lastKeyset[2])};a.checkCombos=function(){var b,h,e,d=a.$preview.val(),f=a.$preview.caret(),i=d.length;if(f.end<f.start)f.end=f.start;if(f.start>i)f.end=f.start=i; a.msie&&d.substr(f.start,1)==="\n"&&(f.start+=1,f.end+=1);if((a.msie||a.opera)&&d.substr(0,f.start).split("\n").length-1>0)e=d.substr(0,f.start).split("\n").length-1,f.start+=e,f.end+=e;c.useCombos&&(d=d.replace(a.regex,function(a,b,e){return c.combos.hasOwnProperty(b)?c.combos[b][e]||a:a}));if(c.restrictInput){e=d.split("");h=e.length;for(b=0;b<h;b++)g.inArray(e[b],a.acceptedKeys)<0&&(d=d.replace(e[b],""))}f.start+=d.length-i;f.end+=d.length-i;a.$preview.val(d);a.$preview.caret(f.start,f.end);a.preview.scrollTop= a.lineHeight*(d.substring(0,f.start).split("\n").length-1);a.lastCaret={start:f.start,end:f.end};return d};a.checkDecimal=function(){a.decimal&&/\./g.test(a.preview.value)||!a.decimal&&/\,/g.test(a.preview.value)?a.$decBtn.attr({disabled:"disabled","aria-disabled":"true"}).removeClass("ui-state-default ui-state-hover").addClass("ui-state-disabled"):a.$decBtn.removeAttr("disabled").attr({"aria-disabled":"false"}).addClass("ui-state-default").removeClass("ui-state-disabled")};a.getLayers=function(a){var c; c=a.attr("name");return a.closest(".ui-keyboard").find("button[name="+c+"]").map(function(){return g(this).find("span").text()}).get()};a.close=function(b){if(a.$keyboard.is(":visible")){clearTimeout(a.throttled);a.$el.trigger(c.alwaysOpen?"":"beforeClose.keyboard",[a,a.el,b||!1]).val(b?c.alwaysOpen?a.$el.val():a.checkCombos():a.originalContent).scrollTop(a.el.scrollHeight).trigger(b?"accepted.keyboard":"canceled.keyboard",[a,a.el]).trigger(c.alwaysOpen?"":"hidden.keyboard",[a,a.el]).removeClass("ui-keyboard-overlay-input"); !c.usePreview&&c.openOn!==""&&a.$el.bind(c.openOn+".keyboard",function(){a.focusOn()});g(".ui-keyboard-overlay").remove();if(!c.alwaysOpen)a.$keyboard.hide(),a.isVisible=!1;!a.watermark&&a.el.value===""&&a.inPlaceholder!==""&&a.$el.addClass("ui-keyboard-placeholder").val(a.inPlaceholder)}return!1};a.accept=function(){a.close(!0)};a.escClose=function(b){b.target!==a.el&&(g(b.target).closest(".ui-keyboard").length||a.close(c.autoAccept?!0:!1),a.msie&&b.preventDefault())};a.keyBtn=g("<button />").attr({role:"button", "aria-disabled":"false"}).addClass("ui-keyboard-button ui-state-default ui-corner-all");a.addKey=function(b,h,e,d){var f,i,j,h=d===!0?b:c.display[h]||b;/\(.+\)/.test(h)&&(i=h.replace(/\(([^()]+)\)/,""),f=h.match(/\(([^()]+)\)/)[1],h=i,j=i.split(":"),i=j[0]!==""&&j.length>1?j[0]:i,a.mappedKeys[f]=i);j=h.split(":");j[0]===""&&j[1]===""&&(h=":");h=j[0]!==""&&j.length>1?g.trim(j[0]):h;f=j.length>1?g.trim(j[1]).replace(/_/g," ")||"":"";i=h.length>1?" ui-keyboard-widekey":"";i+=d?"":" ui-keyboard-actionkey"; return a.keyBtn.clone().attr({"data-value":h,name:"key_"+b,title:f}).data("key",{action:b,original:h,curTxt:h,curNum:0}).addClass("ui-keyboard-"+(d===!0?b.charCodeAt(0):b)+i).html("<span>"+h+"</span>").appendTo(e)};a.buildKeyboard=function(){var b,d,e,k,f,i,j,n=0,m=g("<div />").addClass("ui-keyboard ui-widget-content ui-widget ui-corner-all ui-helper-clearfix"+(c.alwaysOpen?" ui-keyboard-always-open":"")).attr({role:"textbox"}).hide();c.usePreview?a.$preview=a.$el.clone(!1).removeAttr("id").removeAttr("placeholder").removeClass("ui-keyboard-placeholder").addClass("ui-widget-content ui-keyboard-preview ui-corner-all").show(): (a.$preview=a.$el,c.position.at=c.position.at2);a.$preview.attr(c.lockInput?{readonly:"readonly"}:{});c.usePreview&&g("<div />").append(a.$preview).appendTo(m);if(c.layout==="custom"||!g.keyboard.layouts.hasOwnProperty(c.layout))c.layout="custom",g.keyboard.layouts.custom=c.customLayout||{"default":["{cancel}"]};g.each(g.keyboard.layouts[c.layout],function(o,p){if(o!==""){n++;e=g("<div />").attr("name",o).addClass("ui-keyboard-keyset ui-keyboard-keyset-"+o).appendTo(m)[o==="default"?"show":"hide"](); for(d=0;d<p.length;d++){k=g.trim(p[d]).replace(/\{(\.?)[\s+]?:[\s+]?(\.?)\}/g,"{$1:$2}");i=k.split(/\s+/);for(f=0;f<i.length;f++)if(i[f].length!==0)if(/^\{\S+\}$/.test(i[f]))if(b=i[f].match(/^\{(\S+)\}$/)[1].toLowerCase(),/^sp:(\.?\d+)$/.test(b)&&(j=b.match(/^sp:(\.?\d+)$/)[1]||0,g("<span>&nbsp;</span>").css("margin","0 "+j+"em").appendTo(e)),/^meta\d+\:?(\w+)?/.test(b))a.addKey(b,b,e);else switch(b){case "a":case "accept":a.addKey("accept",b,e).addClass(c.actionClass);break;case "alt":case "altgr":a.addKey("alt", "alt",e);break;case "b":case "bksp":a.addKey("bksp",b,e);break;case "c":case "cancel":a.addKey("cancel",b,e).addClass(c.actionClass);break;case "combo":a.addKey("combo","combo",e).addClass(c.actionClass);break;case "dec":a.acceptedKeys.push(a.decimal?".":",");a.addKey("dec","dec",e);break;case "e":case "enter":a.addKey("enter",b,e).addClass(c.actionClass);break;case "s":case "shift":a.addKey("shift",b,e);break;case "sign":a.acceptedKeys.push("-");a.addKey("sign","sign",e);break;case "space":a.acceptedKeys.push(" "); a.addKey("space","&nbsp;",e);break;case "t":case "tab":a.addKey("tab",b,e);break;default:g.keyboard.keyaction.hasOwnProperty(b)&&a.addKey(b,b,e)}else a.acceptedKeys.push(i[f].split(":")[0]),a.addKey(i[f],i[f],e,!0).attr("name","key_"+d+"_"+f);e.find(".ui-keyboard-button:last").after('<br class="ui-keyboard-button-endrow">')}}});if(n>1)a.sets=!0;a.hasMappedKeys=!g.isEmptyObject(a.mappedKeys);return m};a.destroy=function(){g(document).unbind("mousedown.keyboard keyup.keyboard",a.escClose);a.$keyboard&& a.$keyboard.remove();a.$el.removeClass("ui-keyboard-input ui-widget-content ui-corner-all ui-keyboard-placeholder ui-keyboard-notallowed ui-keyboard-always-open").removeAttr("aria-haspopup").removeAttr("role").unbind(c.openOn+".keyboard blur.keyboard accepted.keyboard canceled.keyboard beforeClose.keyboard hidden.keyboard visible.keyboard keydown.keyboard keypress.keyboard keyup.keyboard contextmenu.keyboard initialized.keyboard").removeData("keyboard")};a.init()};g.keyboard.keyaction={accept:function(d){d.close(!0); return!1},alt:function(d,g){d.altActive=!d.altActive;d.showKeySet(g)},bksp:function(d){d.insertText("bksp")},cancel:function(d){d.close();return!1},clear:function(d){d.$preview.val("")},combo:function(d){var g=!d.options.useCombos;d.options.useCombos=g;d.$keyboard.find(".ui-keyboard-combo")[g?"addClass":"removeClass"](d.options.actionClass);g&&d.checkCombos();return!1},dec:function(d){d.insertText(d.decimal?".":",")},enter:function(d){d.el.tagName!=="INPUT"&&d.insertText("\r\n")},lock:function(d, g){d.lastKeyset[0]=d.shiftActive=d.capsLock=!d.capsLock;d.showKeySet(g)},meta:function(d,k){d.metaActive=g(k).is("."+d.options.actionClass)?!1:!0;d.showKeySet(k)},shift:function(d,g){d.lastKeyset[0]=d.shiftActive=!d.shiftActive;d.showKeySet(g)},sign:function(d){/^\-?\d*\.?\d*$/.test(d.$preview.val())&&d.$preview.val(d.$preview.val()*-1)},space:function(d){d.insertText(" ")},tab:function(d){d.el.tagName!=="INPUT"&&d.insertText("\t")}};g.keyboard.layouts={alpha:{"default":["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}", "{tab} a b c d e f g h i j [ ] \\","k l m n o p q r s ; ' {enter}","{shift} t u v w x y z , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} A B C D E F G H I J { } |",'K L M N O P Q R S : " {enter}',"{shift} T U V W X Y Z < > ? {shift}","{accept} {space} {cancel}"]},qwerty:{"default":["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}", "{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {space} {cancel}"]},international:{"default":["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {alt} {space} {alt} {cancel}"], alt:["~ \u00a1 \u00b2 \u00b3 \u00a4 \u20ac \u00bc \u00bd \u00be \u2018 \u2019 \u00a5 \u00d7 {bksp}","{tab} \u00e4 \u00e5 \u00e9 \u00ae \u00fe \u00fc \u00fa \u00ed \u00f3 \u00f6 \u00ab \u00bb \u00ac","\u00e1 \u00df \u00f0 f g h j k \u00f8 \u00b6 \u00b4 {enter}","{shift} \u00e6 x \u00a9 v b \u00f1 \u00b5 \u00e7 > \u00bf {shift}","{accept} {alt} {space} {alt} {cancel}"],"alt-shift":["~ \u00b9 \u00b2 \u00b3 \u00a3 \u20ac \u00bc \u00bd \u00be \u2018 \u2019 \u00a5 \u00f7 {bksp}","{tab} \u00c4 \u00c5 \u00c9 \u00ae \u00de \u00dc \u00da \u00cd \u00d3 \u00d6 \u00ab \u00bb \u00a6", "\u00c4 \u00a7 \u00d0 F G H J K \u00d8 \u00b0 \u00a8 {enter}","{shift} \u00c6 X \u00a2 V B \u00d1 \u00b5 \u00c7 . \u00bf {shift}","{accept} {alt} {space} {alt} {cancel}"]},dvorak:{"default":["` 1 2 3 4 5 6 7 8 9 0 [ ] {bksp}","{tab} ' , . p y f g c r l / = \\","a o e u i d h t n s - {enter}","{shift} ; q j k x b m w v z {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) { } {bksp}",'{tab} " < > P Y F G C R L ? + |',"A O E U I D H T N S _ {enter}","{shift} : Q J K X B M W V Z {shift}", "{accept} {space} {cancel}"]},num:{"default":"= ( ) {b},{clear} / * -,7 8 9 +,4 5 6 {sign},1 2 3 %,0 . {a} {c}".split(",")}};g.keyboard.defaultOptions={layout:"qwerty",customLayout:null,position:{of:null,my:"center top",at:"center top",at2:"center bottom"},usePreview:!0,alwaysOpen:!1,stayOpen:!1,display:{a:"\u2714:Accept (Shift-Enter)",accept:"Accept:Accept (Shift-Enter)",alt:"AltGr:Alternate Graphemes",b:"\u2190:Backspace",bksp:"Bksp:Backspace",c:"\u2716:Cancel (Esc)",cancel:"Cancel:Cancel (Esc)", clear:"C:Clear",combo:"\u00f6:Toggle Combo Keys",dec:".:Decimal",e:"\u21b5:Enter",enter:"Enter:Enter",lock:"\u21ea Lock:Caps Lock",s:"\u21e7:Shift",shift:"Shift:Shift",sign:"\u00b1:Change Sign",space:" :Space",t:"\u21e5:Tab",tab:"\u21e5 Tab:Tab"},wheelMessage:"Use mousewheel to see other keys",actionClass:"ui-state-active",autoAccept:!1,lockInput:!1,restrictInput:!1,stickyShift:!0,preventPaste:!1,maxLength:!1,openOn:"focus",keyBinding:"mousedown",useCombos:!0,combos:{"`":{a:"\u00e0",A:"\u00c0",e:"\u00e8", E:"\u00c8",i:"\u00ec",I:"\u00cc",o:"\u00f2",O:"\u00d2",u:"\u00f9",U:"\u00d9",y:"\u1ef3",Y:"\u1ef2"},"'":{a:"\u00e1",A:"\u00c1",e:"\u00e9",E:"\u00c9",i:"\u00ed",I:"\u00cd",o:"\u00f3",O:"\u00d3",u:"\u00fa",U:"\u00da",y:"\u00fd",Y:"\u00dd"},'"':{a:"\u00e4",A:"\u00c4",e:"\u00eb",E:"\u00cb",i:"\u00ef",I:"\u00cf",o:"\u00f6",O:"\u00d6",u:"\u00fc",U:"\u00dc",y:"\u00ff",Y:"\u0178"},"^":{a:"\u00e2",A:"\u00c2",e:"\u00ea",E:"\u00ca",i:"\u00ee",I:"\u00ce",o:"\u00f4",O:"\u00d4",u:"\u00fb",U:"\u00db",y:"\u0177", Y:"\u0176"},"~":{a:"\u00e3",A:"\u00c3",e:"\u1ebd",E:"\u1ebc",i:"\u0129",I:"\u0128",o:"\u00f5",O:"\u00d5",u:"\u0169",U:"\u0168",y:"\u1ef9",Y:"\u1ef8",n:"\u00f1",N:"\u00d1"}},initialized:null,accepted:null,canceled:null,hidden:null,visible:null,beforeClose:null};g.keyboard.comboRegex=/([`\'~\^\"ao])([a-z])/mig;g.fn.keyboard=function(d){return this.each(function(){new g.keyboard(this,d)})};g.fn.getkeyboard=function(){return this.data("keyboard")}})(jQuery);

(function(g,d,k,a){g.fn.caret=function(c,b){var h,e,l,f,i;i=document.selection;var j=this[0],n=j.scrollTop,m=g.browser.msie;if(typeof j!=="undefined")return typeof c==="number"&&typeof b==="number"&&(e=c,f=b),typeof e!=="undefined"?(m?(i=j.createTextRange(),i.collapse(!0),i.moveStart("character",e),i.moveEnd("character",f-e),i.select()):(j.selectionStart=e,j.selectionEnd=f),j.focus(),j.scrollTop=n,this):(m?j.tagName.toLowerCase()!=="textarea"?(f=this.val(),e=i[k]()[a](),e.moveEnd("character",f[d]), h=e.text===""?f[d]:f.lastIndexOf(e.text),e=i[k]()[a](),e.moveStart("character",-f[d]),l=e.text[d]):(e=i[k](),i=e[a](),i.moveToElementText(j),i.setEndPoint("EndToEnd",e),h=i.text[d]-e.text[d],l=h+e.text[d]):(h=j.selectionStart,l=j.selectionEnd),i=j.value.substring(h,l),{start:h,end:l,text:i,replace:function(a){return j.value.substring(0,h)+a+j.value.substring(l,j.value[d])}})}})(jQuery,"length","createRange","duplicate");
